// Parsley Syntax Highlighting Test
// This file demonstrates all the syntax features

// Keywords and Variables
let x = 42
let name = "Alice"
let _ = "ignored"

// Functions
let greet = fn(name) {
    if (name) {
        "Hello, " + name
    } else {
        "Hello, stranger"
    }
}

// Module imports
let utils = import(@./lib/utils.pars)
let {add, multiply} = import(@./math.pars)
let {square as sq} = import(@./helpers.pars)

// Regular expression literals
let emailRegex = /^[\w.+-]+@[\w.-]+\.[a-zA-Z]{2,}$/
let match = "user@example.com" ~ emailRegex
let notMatch = "invalid" !~ emailRegex

// Path literals
let configPath = @./config/settings.json
let binPath = @/usr/local/bin
let homePath = @~/documents/file.txt

// URL literals
let apiUrl = @https://api.example.com/v1/users
let localUrl = @http://localhost:8080/api
let secureUrl = @https://user:pass@example.com:8080/path?q=test#section

// Interpolated path templates
let fileName = "config"
let pathTemplate = @(./data/{fileName}.json)
let dirPath = @(./src/{fileName}/main.go)
let absPath = @(/home/{name}/docs)

// Interpolated URL templates
let version = "v2"
let urlTemplate = @(https://api.example.com/{version}/users)
let portNum = 8080
let localApi = @(http://localhost:{portNum}/api)
let dynamicHost = @(https://{name}.example.com/profile)

// Datetime literals
let christmas = @2024-12-25               // Date only
let meeting = @2024-12-25T14:30:00        // Full datetime with time
let meetingUTC = @2024-12-25T14:30:00Z    // With UTC timezone
let meetingTZ = @2024-12-25T14:30:00-05:00 // With timezone offset

// Time-only literals
let lunchTime = @12:30                    // HH:MM format
let preciseTime = @12:30:45               // HH:MM:SS format

// Interpolated datetime templates
let month = "06"
let day = "15"
let dateTemplate = @(2024-{month}-{day})  // Date with interpolation
let hour = "14"
let datetimeTemplate = @(2024-12-25T{hour}:30:00)  // Datetime with interpolation
let timeTemplate = @({hour}:30)           // Time with interpolation
let yearVar = "2025"
let fullTemplate = @({yearVar}-{month}-{day}T{hour}:30:00)  // Multiple interpolations

// Duration literals
let oneDay = @1d
let twoHoursThirty = @2h30m
let oneYearSixMonths = @1y6mo
let yesterday = @-1d                      // Negative duration
let combined = @1y2mo3d4h30m

// String interpolation
let greeting = "Hello, {name}!"
let html = "<p>{greeting}</p>"

// Template literals
let template = `
  Name: {name}
  Age: {x}
`

// Arrays and destructuring
let nums = [1, 2, 3, 4, 5]
let first, second, rest = nums

// Dictionaries
let person = {
    name: "Sam",
    age: 57,
    greet: fn() { "Hello, " + this.name }
}

let {name: userName, age: userAge} = person

// Built-in functions
log("Testing built-in functions")
logLine("With line numbers")
let upper = toUpper("hello")
let sorted = sort([5, 2, 8, 1])
let mapped = map(fn(x) { x * 2 }, nums)

// Math functions
let result = sqrt(16) + pow(2, 3)
let angle = sin(pi() / 2)

// Date/time functions
let current = now()
let timestamp = time("2024-11-26")

// Path and URL functions
let p = path("/usr/local/bin/tool.exe")
let u = url("https://example.com/api?limit=10")

// Regex functions
let pattern = regex("\\d+", "g")
let replaced = replace("abc123def456", /\d+/g, "X")
let parts = split("a,b,c", ",")

// Dictionary functions
let allKeys = keys(person)
let allValues = values(person)
let hasName = has(person, "name")

// Control flow
for (num in nums) {
    if (num % 2 == 0) {
        log("Even:", num)
    } else {
        log("Odd:", num)
    }
}

// HTML/XML tags
let page = <html>
    <head>
        <title>My Page</title>
        <meta charset="utf-8" />
    </head>
    <body>
        <h1>Welcome</h1>
        <p>Hello, {name}!</p>
        <img src="photo.jpg" width="{300}" />
    </body>
</html>

// Operators
let sum = 1 + 2
let diff = 10 - 5
let product = 3 * 4
let quotient = 20 / 4
let remainder = 17 % 5
let concat = [1, 2] ++ [3, 4]
let comparison = x == 42 && name != ""
let logical = true || false && !false

// Constants
let isTrue = true
let isFalse = false
let nothing = null

return "Syntax test complete"
